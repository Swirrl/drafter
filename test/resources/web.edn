{
 :drafter.middleware/wrap-auth {:drafter.user/repo #ig/ref :drafter.user/repo
                                :jws-signing-key "foo"}

 [:drafter.timeouts/timeout-query :drafter/live-timeout] {:endpoint-timeout 30
                                                          :jws-signing-key "foo"}

 [:drafter.timeouts/timeout-query :drafter/draftset-timeout] {:endpoint-timeout 30
                                                              :jws-signing-key "foo"}
 
 :drafter.routes.sparql/live-sparql-query-route {:repo #ig/ref :drafter.backend.draftset/endpoint
                                                 :endpoint-timeout-fn #ig/ref [:drafter.timeouts/timeout-query :drafter/live-timeout]}


 :drafter.routes.draftsets-api/get-draftsets-handler {:repo #ig/ref :drafter.backend/rdf4j-repo
                                                      :wrap-auth #ig/ref :drafter.middleware/wrap-auth}
 
 :drafter.routes/draftsets-api {:repo #ig/ref :drafter.backend/rdf4j-repo
                                :drafter.user/repo #ig/ref :drafter.user/repo
                                :wrap-auth #ig/ref :drafter.middleware/wrap-auth
                                :get-draftsets-handler #ig/ref :drafter.routes.draftsets-api/get-draftsets-handler
                                :timeout-fn #ig/ref [:drafter.timeouts/timeout-query :drafter/draftset-timeout]}
 
 :drafter.handler/app {:wrap-auth #ig/ref :drafter.middleware/wrap-auth
                       :repo #ig/ref :drafter.backend/rdf4j-repo
                       :live-sparql-query-route #ig/ref :drafter.routes.sparql/live-sparql-query-route
                       :draftset-api-routes #ig/ref :drafter.routes/draftsets-api
                       }
 

 
 :drafter.server/http {:handler #ig/ref :drafter.handler/app
                       :open-browser? false
                       :stacktraces? false
                       :port #long #or [#port #env DRAFTER_HTTP_PORT 3003]}
 }
