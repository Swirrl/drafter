{

 :drafter.common.config/base-uri "http://drafter-dev.org"

 :drafter.user/memory-repository {:users [{:username "editor@swirrl.com" :password "password" :role :editor}
                                          {:username "publisher@swirrl.com" :password "password" :role :publisher}
                                          {:username "manager@swirrl.com" :password "password" :role :manager}
                                          {:username "system@swirrl.com" :password "password" :role :system}]
                                  :realm "Drafter Memory Repo"}

 :drafter.auth.auth0/mock-jwk {:endpoint #env AUTH0_DOMAIN}

 ;; this config is using the memory-repo for user lookup, so will not use auth0 API
 :swirrl.auth0/client {:iss #env AUTH0_DOMAIN
                       :aud #env AUTH0_AUD
                       :endpoint #env AUTH0_DOMAIN
                       :client-id #env AUTH0_CLIENT_ID
                       :client-secret #env AUTH0_CLIENT_SECRET}

 :swirrl.auth0.middleware/bearer-token
 {:auth0 #ig/ref :swirrl.auth0/client :jwk #ig/ref :drafter.auth.auth0/mock-jwk}

 :drafter.middleware.auth0-auth/identify {}

 :drafter.middleware.auth0-auth/token-authentication {}

 :drafter.middleware.auth0-auth/authorization {}

 :drafter.auth/read-role {}
 :swirrl.auth0.middleware/normalize-roles {:role-reader #ig/ref :drafter.auth/read-role}

 :drafter.middleware/wrap-auth
 {:middleware [#ig/ref :swirrl.auth0.middleware/bearer-token
               #ig/ref :swirrl.auth0.middleware/normalize-roles
               #ig/ref :drafter.middleware.auth0-auth/identify
               #ig/ref :drafter.middleware.auth0-auth/token-authentication
               #ig/ref :drafter.middleware.auth0-auth/authorization]}

 }
