#!/usr/bin/env bash

set -e
set -o pipefail

if [ -z "${SPARQL_QUERY_ENDPOINT}" ] && [ -z "${SPARQL_UPDATE_ENDPOINT}" ] ; then
   echo You must set env vars for SPARQL_UPDATE_ENDPOINT and SPARQL_QUERY_ENDPOINT
   exit 1
fi

cd `dirname $0`

cd ../drafter

[ -f log-config.edn ] || cp log-config.edn.example log-config.edn2

./bin/kaocha --reporter documentation --fail-fast

clojure -A:dev:spec


cd ../drafter-client

[ -f log-config.edn ] || cp ../drafter/log-config.edn.example log-config.edn

./bin/kaocha --fail-fast
